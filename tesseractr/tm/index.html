<!DOCTYPE HTML>
<html>
<head>
  <script src="/dist/tesseract.min.js"></script>
  <style>
  </style>
</head>
<body>
  <script type="module">
    // ... (Initialization code remains the same)

    const recognize = async function(evt) {
      // ... (File selection and initialization code remains the same)

      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const reader = new FileReader();

        reader.onload = async function(e) {
          // ... (Thumbnail creation code remains the same)

          console.log(`Processing file: ${file.name}`);

          // Select worker based on current file index and processed images
          const workerIndex = (i + allData.length) % workerN;
          const worker = workers[workerIndex];

          try {
            const { data } = await worker.recognize(file); // Await completion

            // ... (Process image data and update allData array)

          } catch (error) {
            // Handle worker errors
            console.error('Worker error:', error);
          }
        };

        reader.readAsDataURL(file);
      }
    };

    // ... (Event listener and download function remain the same)
  </script>
</body>
</html>
